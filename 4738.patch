From fffffa84c5e7d70fb3c69644dd9408fa440ba217 Mon Sep 17 00:00:00 2001
From: Jens Petersen <juhpetersen@gmail.com>
Date: Fri, 10 Oct 2025 20:42:43 +0800
Subject: [PATCH] haskell-language-server: add plugin-tutorial cabal flag

Toggles building of the plugin-tutorial executable
---
 haskell-language-server.cabal | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/haskell-language-server.cabal b/haskell-language-server.cabal
index 38f3e42095..86c28a7a9a 100644
--- a/haskell-language-server.cabal
+++ b/haskell-language-server.cabal
@@ -2337,11 +2337,16 @@ test-suite ghcide-bench-test
         RecordWildCards
         ViewPatterns
 
+flag plugin-tutorial
+  description: Build the plugin tutorial executable
+  default:     True
+  manual:      True
+
 executable plugin-tutorial
   import: defaults
   -- The plugin tutorial is only compatible with 9.6 and 9.8.
   -- No particular reason, just to avoid excessive CPP.
-  if (impl(ghc >= 9.6) && impl(ghc < 9.10))
+  if flag(plugin-tutorial) && (impl(ghc >= 9.6) && impl(ghc < 9.10))
     buildable: True
   else
     buildable: False
